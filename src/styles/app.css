:root {
  --bg: #f4f6fb;
  --surface: #ffffff;
  --surface-2: #eef2f8;
  --text: #1e2330;
  --muted: #5f6677;
  --border: #d5dcea;
  --primary: #3056d3;
  --primary-contrast: #ffffff;
  --danger: #b93a48;
  --warning: #9a6a00;
  --success: #1f7d4a;
  --info: #2767b6;
  --danger-bg: #ffecee;
  --warning-bg: #fff4dd;
  --success-bg: #eaf8f0;
  --info-bg: #ecf4ff;
  --font-sans: "Inter", system-ui, sans-serif;
  --fs-1: 0.75rem;
  --fs-2: 0.875rem;
  --fs-3: 1rem;
  --fs-4: 1.125rem;
  --fs-5: 1.5rem;
  --lh: 1.5;
  --fw-regular: 400;
  --fw-medium: 500;
  --fw-semibold: 600;
  --r-1: 8px; --r-2: 10px; --r-3: 12px; --r-4: 16px;
  --shadow-1: 0 1px 3px rgb(0 0 0 / 8%);
  --shadow-2: 0 8px 24px rgb(31 40 60 / 10%);
  --shadow-3: 0 18px 34px rgb(28 35 53 / 16%);
  --s-1: 4px; --s-2: 8px; --s-3: 12px; --s-4: 16px; --s-5: 24px; --s-6: 32px;
  --t-fast: 140ms; --t-med: 220ms; --ease: cubic-bezier(.2,.8,.2,1);
  font-family: var(--font-sans);
}
* { box-sizing: border-box; }
.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0; }

body { margin: 0; background: var(--bg); color: var(--text); font-size: var(--fs-3); line-height: var(--lh); }
button,input,select,textarea,.import-label { font: inherit; min-height: 44px; }
button,.import-label { cursor: pointer; }
button:focus-visible,input:focus-visible,select:focus-visible,textarea:focus-visible,.import-label:focus-visible { outline: 2px solid var(--primary); outline-offset: 2px; }

.btn,.import-label { display:inline-flex; align-items:center; justify-content:center; gap:var(--s-2); border:1px solid var(--border); background:var(--surface); color:var(--text); border-radius:var(--r-2); padding:10px 14px; transition: all var(--t-fast) var(--ease); }
.btn:hover,.import-label:hover { transform: translateY(-1px); box-shadow: var(--shadow-1); }
.btn:disabled { opacity:.55; cursor:not-allowed; transform:none; box-shadow:none; }
.btn--primary { background: var(--primary); color: var(--primary-contrast); border-color: var(--primary); }
.btn--secondary { background: var(--surface); }
.btn--ghost { background: transparent; }
.btn--danger { background: var(--danger-bg); border-color: var(--danger); color: var(--danger); }
.btn--sm { padding: 8px 10px; font-size: var(--fs-2); }
.icon-btn { width: 44px; min-width: 44px; border: 1px solid var(--border); background: var(--surface); border-radius: var(--r-2); display: inline-flex; align-items: center; justify-content: center; }

input,select,textarea { border:1px solid var(--border); background:var(--surface); border-radius: var(--r-2); padding: 10px 12px; color:var(--text); }

.app { min-height:100vh; }
.app-header { display:flex; flex-direction:column; gap:var(--s-3); padding:var(--s-4); border-bottom:1px solid var(--border); background:var(--surface); }
.app-header h1 { margin:0; font-size:var(--fs-5); }
.app-header p { margin:4px 0; color:var(--muted); }
.product-badge { display:inline-flex; padding:4px 10px; border-radius:999px; background:var(--info-bg); color:var(--info); font-size:var(--fs-2); font-weight:var(--fw-medium); }
.app-header__actions,.app-header__status { display:flex; flex-wrap:wrap; align-items:center; gap:var(--s-3); }
.status-banner { background:var(--info-bg); border:1px solid var(--info); color:var(--info); padding:var(--s-2) var(--s-3); border-radius:var(--r-2); }

.app-nav { display:flex; gap:var(--s-2); padding: var(--s-3) var(--s-4); overflow-x:auto; border-bottom:1px solid var(--border); background:var(--surface-2); }
.app-nav .btn { border-radius:999px; white-space:nowrap; }
.view { max-width:1200px; margin:0 auto; padding:var(--s-4); }

.card { background: var(--surface); border:1px solid var(--border); border-radius: var(--r-3); box-shadow: var(--shadow-1); }
.task-input { padding:var(--s-4); margin-bottom:var(--s-4); }
.task-input__composer { display:flex; gap:var(--s-2); flex-wrap:wrap; }
.task-input input { flex:1; min-width:220px; }
.task-input__helper { margin:0; color:var(--muted); display:flex; gap:var(--s-2); flex-wrap:wrap; font-size:var(--fs-2); }

.badge { display:inline-flex; align-items:center; border-radius:999px; padding:4px 10px; background:var(--surface-2); font-size:var(--fs-1); font-weight:var(--fw-semibold); }
.badge--status-backlog { background: var(--info-bg); color: var(--info); }
.badge--status-in_progress { background: var(--warning-bg); color: var(--warning); }
.badge--status-blocked,.badge--risk-critical,.badge--risk-high { background: var(--danger-bg); color: var(--danger); }
.badge--status-done,.badge--risk-low { background: var(--success-bg); color: var(--success); }
.badge--status-archived,.badge--risk-medium { background: var(--surface-2); color: var(--muted); }

.board-header,.filters { display:flex; flex-wrap:wrap; gap:var(--s-3); margin-bottom:var(--s-4); }
.board { display:grid; grid-template-columns:1fr; gap:var(--s-4); }
.board-column { background:var(--surface-2); border:1px solid var(--border); border-radius:var(--r-3); padding:var(--s-3); min-width:250px; }
.board-column--drag-over { border-color: var(--primary); background: var(--info-bg); }
.board-column--at_limit { border-color: var(--warning); }
.board-column--over_limit { border-color: var(--danger); }
.board-column__header { display:flex; justify-content:space-between; gap:var(--s-2); }
.board-column__meta { text-align:right; color:var(--muted); font-size:var(--fs-2); }

.task-card { padding:var(--s-4); margin-bottom:var(--s-3); transition: transform var(--t-fast) var(--ease), box-shadow var(--t-fast) var(--ease); }
.task-card:hover { transform: translateY(-1px); box-shadow: var(--shadow-2); }
.task-card__header { display:flex; justify-content:space-between; gap:var(--s-2); }
.task-card__header h4 { margin:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.task-card__meta,.task-card__notes { color:var(--muted); margin:var(--s-2) 0; }
.task-card__risk-row,.task-card__actions,.task-card__tags { display:flex; flex-wrap:wrap; gap:var(--s-2); align-items:center; }
.task-card__due-chip { padding:4px 10px; border-radius:999px; font-size:var(--fs-1); }
.task-card__due-chip--ok { background:var(--success-bg); color:var(--success); }
.task-card__due-chip--warn { background:var(--warning-bg); color:var(--warning); }
.task-card__due-chip--danger { background:var(--danger-bg); color:var(--danger); }
.task-card__due-chip--none { background:var(--surface-2); color:var(--muted); }

.empty-state { border:1px dashed var(--border); border-radius:var(--r-3); background:var(--surface); padding:var(--s-4); color:var(--muted); }
.help-hint { background:var(--info-bg); border:1px solid var(--border); border-radius:var(--r-3); padding:var(--s-3); margin-bottom:var(--s-4); }
.help-hint__title { display:flex; align-items:center; gap:var(--s-2); }

.focus-card { padding:var(--s-4); }
.focus-card__risk-bar { height:8px; border-radius:999px; margin-bottom:var(--s-3); background:var(--surface-2); }
.focus-card__risk-bar--critical,.focus-card__risk-bar--high { background:var(--danger); }
.focus-card__risk-bar--medium { background:var(--warning); }
.focus-card__risk-bar--low { background:var(--success); }

.review-summary { padding:var(--s-4); }
.review-summary__grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(160px,1fr)); gap:var(--s-3); }
.metric-card { padding:var(--s-3); border:1px solid var(--border); border-radius:var(--r-2); background:var(--surface-2); }
.metric-card h4,.metric-card p { margin:0; }
.review-summary__actions { display:flex; flex-wrap:wrap; gap:var(--s-3); margin-top:var(--s-4); }

.calendar-header,.calendar-header__actions { display:flex; flex-wrap:wrap; gap:var(--s-3); align-items:center; justify-content:space-between; }
.calendar__weekdays,.calendar__grid { display:grid; grid-template-columns: repeat(7,minmax(0,1fr)); gap:var(--s-2); }
.calendar__cell,.calendar-week__day { background:var(--surface); border:1px solid var(--border); border-radius:var(--r-2); padding:var(--s-2); }
.calendar__task { background:var(--surface-2); border-radius:var(--r-1); padding:6px 8px; font-size:var(--fs-2); overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

.settings { display:flex; flex-direction:column; gap:var(--s-4); background:var(--surface); padding:var(--s-5); border-radius:var(--r-4); box-shadow:var(--shadow-2); }
.settings__status-grid,.settings__results { display:grid; grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); gap:var(--s-3); }
.settings__results pre { background:var(--surface-2); border-radius:var(--r-2); padding:var(--s-3); margin:0; }

.palette { position:fixed; inset:0; background:rgb(11 13 20 / 60%); display:flex; justify-content:center; align-items:flex-start; padding:var(--s-6) var(--s-4); animation: fade var(--t-med) var(--ease); }
.palette__panel { width:min(680px,100%); background:var(--surface); border-radius:var(--r-3); padding:var(--s-4); max-height:80vh; overflow:auto; transform: translateY(8px); animation: slide var(--t-med) var(--ease) forwards; }
.palette__header,.palette__actions { display:flex; justify-content:space-between; gap:var(--s-2); }

@keyframes fade { from { opacity:0; } to { opacity:1; } }
@keyframes slide { from { opacity:0; transform: translateY(16px);} to { opacity:1; transform: translateY(0);} }
@media (min-width: 1120px) { .board { grid-template-columns: repeat(5,minmax(220px,1fr)); overflow-x:auto; } }
@media (max-width: 768px) { .view,.app-header,.app-nav { padding:var(--s-3); } }
